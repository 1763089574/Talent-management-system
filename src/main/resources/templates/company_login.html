<!DOCTYPE html>
<html lang="zh-CN">

<head>




    <link rel="stylesheet" href="/static_company/css/all.min.css">
    <!--<link rel="stylesheet" href="../static/static_company/css/all.min.css">-->
    <link rel="stylesheet" href="/static_company/css/dmaku.css">
    <!--<link rel="stylesheet" href="../static/static_company/css/dmaku.css">-->
    <script src="/assets/js/vue.js"></script>


    <meta charset="utf-8">
    <title>公司登录</title>

    <style>
        .get-code {
            float:right;
            
            }
        .code-btn {
            color:#002b;
            font-size:12px;
            border:1px solid #002b;
            border-radius:5px;
            padding:5px;
            box-sizing:border-box;
            cursor:pointer;
            height:50%;

        }
        .code-btn_1 {
            color: #999;
            font-size:12px;
            border:1px solid #999;
            border-radius:5px;
            padding:5px;
            box-sizing:border-box;
            height:50%;

        }
    </style>

    
</head>

<body>

    <div class="dowebok" id="dowebok">
        <div class="form-container sign-up-container">
            <!--<form >-->
            <div id="dowebok2" class="formTable">
                <h1 style="letter-spacing:10px">注册</h1>
                <div class="social-container">
                   <!--  <a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a> -->
<!--                    <a href="#" class="social"><i class="fa fa-user-plus" ></i></a>-->
                </div>
                <span>使用公司手机号注册</span>
                <input type="text"  placeholder="公司名称" v-model="name" @input="checkName">
                <label v-if="flagName" style="margin-bottom: 3px;color: green">该公司名称已被注册，请重新输入</label>
                <input type="text"  placeholder="手机号" id="tel_num" oninput="value=value.replace(/[^\d]/g,'')" v-model="phone" @input="checkPhone">
                <label v-if="flagPhone" style="margin-bottom: 3px;color: green">该手机号已被注册，请直接登陆</label>
                <div class="get-code"  style=" display: flex;justify-content: space-between;align-items:center">
                    <input type="text" style="width:70%;" placeholder="验证码">
                    
                    <span class="code-btn" @click="check_code" v-if="show" >获取验证码</span>
                    <span class="code-btn_1" v-else >{{code_time}}s重新获取</span>
                </div>
              
                
                <input type="password" placeholder="密码" v-model="password">
                <input type="password" placeholder="再次输入密码" v-model="repeatpassword" @blur="checkPassword">
                <label v-if="flagPassword" style="margin-bottom: 10px;color: green">密码不一致，请检查之后重新输入</label>
                <button class="button1" @click="register" >注册</button>
            </div>
            <!--</form>-->
        </div>
        <div id="myLogin" class="form-container sign-in-container">
            <!--<form>-->
            <div class="my">
                <h1 style="letter-spacing:10px">公司登录</h1>
                <div class="social-container">
                   <!--  <a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a> -->
                    <a href="#" class="social"><i class="fa fa-user"></i></a>
                </div>

                <div >
                    <span>使用公司手机号</span>
                    <input type="text" placeholder="手机号" v-model="loginPhone">
                    <input type="password" placeholder="密码" v-model="loginPassword">
                    <a href="#">忘记密码？</a>
                    <!--<button class="button1" @click="login">登录</button>-->
                    <button type="button"  @click="myLogin">登录</button>
                </div>

            </div>


            <!--</form>-->
        </div>
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>已有帐号？</h1>
                    <p>请使用您的帐号进行登录</p>
                    <button class="ghost button1" id="signIn">登录</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>没有帐号？</h1>
                    <p>立即注册加入我们，和我们一起开始旅程吧</p>
                    <button class="ghost button1" id="signUp">注册</button>
                </div>
            </div>
        </div>
    </div>


    <script src="/assets/js/vue.js"></script>
    <script src="/assets/js/axios.min.js"></script>
    <script  src="/static_company/js/yanz.js"></script>


    <script>
        var one=new Vue({
            el:"#myLogin",
            data:{
                loginPhone:"",
                loginPassword:""
            },
            methods:
                {
                    myLogin:function(){
                        var that=this;
                        console.log("登陆前")
                        axios.get("http://localhost:8280/company/login", {
                            params: {
                                loginPhone: that.loginPhone,
                                loginPassword: that.loginPassword,
                            }
                        }).then(
                            function (response) {
                                console.log("登陆成功" + response.data)
                                console.log( response)
                                console.log( response.data)

                            },
                            function (err) {
                                console.log("失败" + err)
                            }
                        )
                    },
                }

        });
        var app=new Vue({
            el:"#dowebok2",
            data:{
                name:"",//公司名称
                phone:"",//手机号
                password:"",//密码
                repeatpassword:"",//校验密码
                flagName:false,
                flagPhone:false,
                flagPassword:false,
                /*loginPhone:"",//登陆账号
                loginPasswrd:"",//登陆密码*/


            },
            methods:
                {
                    checkName:function(){//检查公司名称是否已被注册
                        var that=this
                        axios.get("http://localhost:8280/company/checkName", {
                            params: {
                                name: that.name,
                            }
                        }).then(
                            function (response) {
                                console.log("检查name成功" + response.data)
                                that.flagName=response.data;
                            },
                            function (err) {
                                console.log("检查name失败" + err)
                            }
                        )


                    },
                    checkPhone:function(){//检查手机号是否已被注册
                        var that=this
                        axios.get("http://localhost:8280/company/checkPhone", {
                            params: {
                                phone: that.phone,
                            }
                        }).then(
                            function (response) {
                                console.log("检查phone成功" + response.data)
                                that.flagPhone=response.data;
                            },
                            function (err) {
                                console.log("检查phone失败" + err)
                            }
                        )

                    },

                    checkPassword:function(){//检查两次密码是否一致
                        if(this.password!=this.repeatpassword)
                        {
                            this.flagPassword=true;
                        }
                        else
                        {
                            this.flagPassword=false;
                        }

                    },
                    login:function(){
                        var that=this;
                        axios.get("http://localhost:8280/company/login", {
                            params: {
                                loginPhone: that.loginPhone,
                                loginPassword: that.loginPassword,
                            }
                        }).then(
                            function (response) {
                                console.log("登陆成功" + response.data)

                            },
                            function (err) {
                                console.log("失败" + err)
                            }
                        )
                    },
                    register:function () {
                        var that=this
                        that.checkPassword();
                        console.log("调用前")
                        //axios.get()
                        if(that.name=="")
                        {
                            alert("请输入公司名称")
                        }
                        else if(that.phone==""){
                            alert("请输入手机号")
                        }
                        else if(that.name==""){
                            alert("请输入公司手机号")
                        }
                        else {
                                    axios.get("http://localhost:8280/company/register", {
                                        params: {
                                            name: that.name,
                                            phone: that.phone,
                                            password: that.password,

                                        }
                                    }).then(
                                        function (response) {
                                            console.log("成功" + response.data)
                                            alert("注册成功")
                                        },
                                        function (err) {
                                            console.log("失败" + err)
                                        }
                                    )
                        }


                    }

                }

        });
    </script>
    <script>
        var signUpButton = document.getElementById('signUp')
        var signInButton = document.getElementById('signIn')
        var container = document.getElementById('dowebok')

        signUpButton.addEventListener('click', function () {
            container.classList.add('right-panel-active')
            console.log("222")
        })

        signInButton.addEventListener('click', function () {
            container.classList.remove('right-panel-active')
            console.log("111")
        });
    </script>



</body>


</html>